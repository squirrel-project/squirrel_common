<?xml version="1.0"?>
<robot xmlns:xacro="http://wiki.ros.org/xacro">
  <xacro:macro name="arm">

    <link name="base">
      <xacro:default_inertial/>
      <visual>
        <geometry>
          <box size="0.04096 0.0473 0.105" />
        </geometry>
        <material name="white">
          <color rgba="1 1 1 1"/>
        </material>
        <origin rpy="0 0 0" xyz="0 0 0.0525"/>
      </visual>
    </link>

    <joint name="baserot" type="revolute">
      <parent link="base"/>
      <child link="motor1"/>
      <axis xyz="0 0 1" />
      <origin xyz="0.0 -0.01591 0.140" rpy="0 0 0" />
      <limit upper="1.7" lower="-1.7" effort="160" velocity="30" />
    </joint>

    <link name="motor1">
      <xacro:default_inertial/>
      <visual>
        <geometry>
          <mesh filename="package://robotino_description/meshes/arm/motor1.stl"/>
        </geometry>
        <material name="white">
          <color rgba="1 1 1 1"/>
        </material>
        <origin rpy="0 0 0" xyz="0 0 0."/>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0."/>
        <geometry>
          <mesh filename="package://robotino_description/meshes/arm/motor1_collision.stl"/>
        </geometry>
      </collision>
    </link>

    <joint name="joint1" type="revolute">
      <parent link="motor1"/>
      <child link="link1"/>
      <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      <axis xyz="0 1 0" />
      <limit upper="1.9" lower="-1.9" effort="190" velocity="30" />
    </joint>

    <link name="link1">
      <xacro:default_inertial/>
      <visual>
        <geometry>
          <mesh filename="package://robotino_description/meshes/arm/link1.stl"/>
        </geometry>
        <material name="white" />
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="package://robotino_description/meshes/arm/link1_collision.stl"/>
        </geometry>
      </collision>
    </link>

    <gazebo reference="link1">
        <material>Gazebo/White</material>
    </gazebo>

    <joint name="joint2" type="revolute">
      <parent link="link1"/>
      <child link="motor2"/>
      <origin xyz="0.0 0.09 0.28" rpy="0 0 0" />
      <axis xyz="0 1 0" />
      <limit upper="1.9" lower="-1.9" effort="190" velocity="30" />
    </joint>

    <link name="motor2">
      <xacro:default_inertial/>
      <visual>
        <geometry>
          <box size="0 0 0" />
        </geometry>
        <material name="white" />
        <origin rpy="0 0 0" xyz="0 0.0625 0."/>
      </visual>
    </link>

    <joint name="fixed_motor2_link2" type="fixed">
      <parent link="motor2"/>
      <child link="link2"/>
      <origin xyz="0.0 0.098 0.027" rpy="0 0 0" />
    </joint>

    <link name="link2">
      <xacro:default_inertial/>
      <visual>
        <geometry>
          <mesh filename="package://robotino_description/meshes/arm/link2.stl"/>
        </geometry>
        <material name="white" />
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="package://robotino_description/meshes/arm/link2_collision.stl"/>
        </geometry>
      </collision>
    </link>

    <gazebo reference="link2">
      <material>Gazebo/White</material>
    </gazebo>

    <joint name="joint3" type="revolute">
      <parent link="link2"/>
      <child link="link3"/>
      <origin xyz="0.0 0.0 0.13" rpy="0 0 0" />
      <axis xyz="0 0 1" />
      <limit upper="1.7" lower="-1.7" effort="190" velocity="30" />
    </joint>

    <link name="link3">
      <xacro:default_inertial/>
      <visual>
        <geometry>
          <mesh filename="package://robotino_description/meshes/arm/link3.stl"/>
        </geometry>
        <material name="white" />
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="package://robotino_description/meshes/arm/link3_collision.stl"/>
        </geometry>
      </collision>
    </link>

    <gazebo reference="link3">
      <material>Gazebo/White</material>
    </gazebo>

    <joint name="joint4" type="revolute">
      <parent link="link3"/>
      <child link="link4"/>
      <origin xyz="0.0 -0.053 0.065" rpy="0 0 0" />
      <axis xyz="0 1 0" />
      <limit upper="1.7" lower="-1.7" effort="160" velocity="30" />
    </joint>

    <link name="link4">
      <xacro:default_inertial/>
      <visual>
        <geometry>
          <mesh filename="package://robotino_description/meshes/arm/link4.stl"/>
        </geometry>
        <material name="white" />
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="package://robotino_description/meshes/arm/link4_collision.stl"/>
        </geometry>
      </collision>
    </link>

    <gazebo reference="link4">
      <material>Gazebo/White</material>
    </gazebo>

    <joint name="joint5" type="revolute">
      <parent link="link4"/>
      <child link="link5"/>
      <origin xyz="0.0 -0.027 0.035" rpy="0 0 0" />
      <axis xyz="0 0 1" />
      <limit upper="1.7" lower="-1.7" effort="160" velocity="30" />
    </joint>

    <link name="link5">
      <xacro:default_inertial/>
    </link>
      
    <gazebo reference="link5">
      <material>Gazebo/White</material>
    </gazebo>
      
  <xacro:arm_SimpleTransmission number="1"></xacro:arm_SimpleTransmission>
  <xacro:arm_SimpleTransmission number="2"></xacro:arm_SimpleTransmission>
  <xacro:arm_SimpleTransmission number="3"></xacro:arm_SimpleTransmission>
  <xacro:arm_SimpleTransmission number="4"></xacro:arm_SimpleTransmission>
  <xacro:arm_SimpleTransmission number="5"></xacro:arm_SimpleTransmission>
  <xacro:arm_SimpleTransmission number="6"></xacro:arm_SimpleTransmission>
  <xacro:arm_SimpleTransmission number="7"></xacro:arm_SimpleTransmission>

  </xacro:macro>

  <xacro:macro name="arm_SimpleTransmission" params="number">
    <transmission name="arm_${number}_trans">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="joint${number}">
        <hardwareInterface>PositionJointInterface</hardwareInterface>
        <hardwareInterface>VelocityJointInterface</hardwareInterface>
      </joint>
      <actuator name="arm_${number}_motor">
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>
  </xacro:macro>

  <xacro:macro name="default_inertial">
    <inertial>
      <mass value="0.01"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001" />
    </inertial>
  </xacro:macro>

</robot>
